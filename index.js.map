{"version":3,"file":"index.js","sources":["../src/js/gallery.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nloadMoreBtn.style.display = 'none';\nloader.style.display = 'none';\nlet page = 1;\nlet perPage = 40;\nlet currentQuery = '';\nlet totalHits = 0;\n\nasync function fetchImages(query) {\n  loader.style.display = 'block';\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: '52281373-9c637a03bb3ab255d1364f6e9',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    const hits = response.data.hits;\n    totalHits = response.data.totalHits;\n\n    if (!hits || hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    const markup = hits\n      .map(\n        hit => `\n          <div class=\"card\">\n            <a href=\"${hit.largeImageURL}\">\n              <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"/>\n            </a>\n            <div class=\"card-info\">\n              <span><b>Likes</b>: ${hit.likes}</span>\n              <span><b>Views</b>: ${hit.views}</span>\n              <span><b>Comments</b>: ${hit.comments}</span>\n              <span><b>Downloads</b>: ${hit.downloads}</span>\n            </div>\n          </div>\n        `\n      )\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    const simple = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    simple.refresh();\n\n    if (page * perPage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong while fetching images.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  page = 1;\n  currentQuery = form.querySelector('.search-input').value.trim();\n  if (currentQuery) {\n    fetchImages(currentQuery);\n  }\n});\nloadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  fetchImages(currentQuery).then(() => {\n    const card = document.querySelector('.card');\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  });\n});\n"],"names":["form","gallery","loader","loadMoreBtn","page","perPage","currentQuery","totalHits","fetchImages","query","response","axios","hits","iziToast","markup","hit","SimpleLightbox","error","event","card","cardHeight"],"mappings":"wyBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DA,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,OACvB,IAAIE,EAAO,EACPC,EAAU,GACVC,EAAe,GACfC,EAAY,EAEhB,eAAeC,EAAYC,EAAO,CAChCP,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUJ,EACV,KAAMD,CACP,CACP,CAAK,EAEKQ,EAAOF,EAAS,KAAK,KAG3B,GAFAH,EAAYG,EAAS,KAAK,UAEtB,CAACE,GAAQA,EAAK,SAAW,EAAG,CAC9BC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EACDV,EAAY,MAAM,QAAU,OAC5B,MACD,CAED,MAAMW,EAASF,EACZ,IACCG,GAAO;AAAA;AAAA,uBAEQA,EAAI,aAAa;AAAA,0BACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,oCAGxBA,EAAI,KAAK;AAAA,oCACTA,EAAI,KAAK;AAAA,uCACNA,EAAI,QAAQ;AAAA,wCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,SAI9C,EACA,KAAK,EAAE,EAEVd,EAAQ,mBAAmB,YAAaa,CAAM,EAE/B,IAAIE,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GACpB,CAAK,EACM,QAAO,EAEVZ,EAAOC,GAAWE,GACpBJ,EAAY,MAAM,QAAU,OAC5BU,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,GAEDV,EAAY,MAAM,QAAU,OAE/B,OAAQc,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRX,EAAO,MAAM,QAAU,MACxB,CACH,CAEAF,EAAK,iBAAiB,SAAUkB,GAAS,CACvCA,EAAM,eAAc,EACpBjB,EAAQ,UAAY,GACpBE,EAAY,MAAM,QAAU,OAC5BC,EAAO,EACPE,EAAeN,EAAK,cAAc,eAAe,EAAE,MAAM,OACrDM,GACFE,EAAYF,CAAY,CAE5B,CAAC,EACDH,EAAY,iBAAiB,QAAS,IAAM,CAC1CC,GAAQ,EACRI,EAAYF,CAAY,EAAE,KAAK,IAAM,CACnC,MAAMa,EAAO,SAAS,cAAc,OAAO,EAC3C,GAAIA,EAAM,CACR,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACL,CAAG,CACH,CAAC"}